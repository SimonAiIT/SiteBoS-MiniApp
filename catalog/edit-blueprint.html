<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title data-i18n="page_title">Blueprint Editor</title>
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="../styles.css">
</head>
<body>

  <div id="loadingOverlay">
    <div class="spinner-ring"></div>
    <div id="loaderText" data-i18n="loading"></div>
  </div>

  <div class="container hidden" id="mainContent">
    <h1 id="pageTitle" data-i18n="title"></h1>
    <p class="subtitle" id="pageSubtitle" data-i18n="subtitle"></p>
    
    <form id="blueprintForm">
      
      <div class="form-section">
        <div class="form-section-title" data-i18n="lblInfo"></div>
        <div class="form-group">
          <label class="disabled">SKU</label>
          <input type="text" id="serviceSku" disabled>
        </div>
        <div class="form-group">
          <label data-i18n="lblDesc"></label>
          <textarea id="blueprintDesc" rows="2"></textarea>
        </div>
      </div>

      <div class="form-section-title" data-i18n="lblStages"></div>
      <div id="stagesContainer"></div>

      <div class="btn-container">
        <button type="button" class="btn btn-secondary btn-block" id="btnAddStageBtn">
          <i class="fas fa-plus"></i> <span data-i18n="btnAddStage"></span>
        </button>
      </div>

      <div class="btn-container" style="margin-top: 40px;">
        <button type="submit" class="btn btn-primary btn-block" id="saveBtn">
          <i class="fas fa-save"></i> <span data-i18n="btnSave"></span>
        </button>
      </div>
      <p class="cancel-hint" data-i18n="cancelHint"></p>
    </form>
  </div>

  <button class="back-fab" onclick="history.back()">
    <i class="fas fa-arrow-left"></i>
  </button>

  <script src="edit-blueprint_logic.js"></script>
</body>
</html>
