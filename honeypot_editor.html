<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>HoneyPot Editor</title>
  
  <!-- LIBS -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- UNIFIED STYLE -->
  <link rel="stylesheet" href="styles.css">
  
  <style>
    /* Stili specifici di pagina */
    .guide-step { padding: 10px 0; border-bottom: 1px solid var(--glass-border); display: flex; align-items: center; gap: 10px; color: var(--text-muted); font-size: 14px; }
    .guide-step:last-child { border-bottom: none; }
    .guide-step i { color: var(--primary); width: 20px; text-align: center; }
    
    .utterance-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 5px; }
    .asset-preview img { max-width: 100px; border-radius: 8px; margin-top: 10px; border: 1px solid var(--glass-border); }
    .asset-description { font-size: 11px; color: var(--text-muted); margin-top: 4px; font-style: italic; }
    
    .offer-preview { background: rgba(0,0,0,0.3); border: 1px dashed var(--glass-border); padding: 15px; border-radius: 12px; font-size: 13px; line-height: 1.5; color: var(--text-secondary); margin-top: 10px; cursor: pointer; transition: all 0.2s; }
    .offer-preview:hover { background: rgba(0,0,0,0.4); border-color: var(--primary); color: var(--text-main); }
    .click-hint { font-size: 10px; color: var(--primary); float: right; cursor: pointer; }
  </style>
</head>
<body>

  <!-- LOADER -->
  <div id="loader"><div class="spinner"></div></div>

  <!-- MAIN CONTENT -->
  <div id="app-content" class="container hidden">
    <h1 data-i18n="title"></h1>
    <p class="subtitle" data-i18n="subtitle"></p>
    
    <!-- SEZIONE 1: Offerta di Benvenuto -->
    <div class="knowledge-card highlight open">
      <div class="card-header">
        <h3><i class="fas fa-gift"></i> <span data-i18n="section_offer_title"></span></h3>
        <i class="fas fa-chevron-down chevron"></i>
      </div>
      <div class="card-content">
        <p class="subtitle" data-i18n="offer_desc" style="margin-bottom: 15px;"></p>
        <div class="input-group">
            <label data-i18n="lbl_offer_prompt"></label>
            <textarea id="offer-prompt" placeholder="Es: 10% di sconto sul primo acquisto..." rows="2"></textarea>
        </div>
        <button type="button" class="btn btn-primary btn-block" id="btn-generate-offer">
            <i class="fas fa-magic"></i> <span data-i18n="btn_generate_offer"></span>
        </button>
        <div class="input-group mt-2">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <label data-i18n="lbl_offer_preview"></label>
                <span class="click-hint" id="btn-copy-offer"><i class="far fa-copy"></i> <span data-i18n="lbl_click_copy"></span></span>
            </div>
            <div id="offer-preview-box" class="offer-preview"></div>
            <input type="hidden" id="offer_html_storage" data-path="offer_text">
        </div>
      </div>
    </div>

    <!-- SEZIONE 2: Configurazione Bot -->
    <div class="knowledge-card">
      <div class="card-header">
        <h3><i class="fas fa-rocket"></i> <span data-i18n="section_bot_title"></span></h3>
        <i class="fas fa-chevron-down chevron"></i>
      </div>
      <div class="card-content">
          <div class="guide-step"><i class="fab fa-telegram"></i> <span data-i18n="guide_bot_1"></span></div>
          <div class="guide-step"><i class="fas fa-plus-circle"></i> <span data-i18n="guide_bot_2"></span></div>
          <div class="guide-step"><i class="fas fa-pen"></i> <span data-i18n="guide_bot_3"></span></div>
          <div class="guide-step"><i class="fas fa-key"></i> <span data-i18n="guide_bot_4"></span></div>
          <div class="guide-step"><i class="fas fa-video"></i> <span data-i18n="guide_bot_video"></span></div>
          <div class="input-group mt-2">
            <label>Telegram Bot Token</label>
            <div class="d-flex gap-2">
                <input type="text" id="bot-token-input" placeholder="123456:ABC-...">
                <button type="button" class="btn btn-primary btn-sm" id="btn-link-bot">
                    <i class="fas fa-link"></i> <span data-i18n="btn_link_bot"></span>
                </button>
            </div>
            <div id="bot-status" class="hint" style="margin-top: 8px; font-weight: 600;"></div>
          </div>
      </div>
    </div>

    <!-- SEZIONE 3: Configurazione Gruppo -->
    <div class="knowledge-card">
      <div class="card-header">
        <h3><i class="fas fa-users"></i> <span data-i18n="section_group_title"></span></h3>
        <i class="fas fa-chevron-down chevron"></i>
      </div>
      <div class="card-content">
          <div class="guide-step"><i class="fas fa-plus-circle"></i> <span data-i18n="guide_group_1"></span></div>
          <div class="guide-step"><i class="fas fa-user-plus"></i> <span data-i18n="guide_group_2"></span></div>
          <div class="guide-step"><i class="fas fa-user-shield"></i> <span data-i18n="guide_group_3"></span></div>
          <div class="guide-step"><i class="fas fa-video"></i> <span data-i18n="guide_group_video"></span></div>
      </div>
    </div>

    <!-- SEZIONE 4: HoneyPot (Contenitore Dinamico) -->
    <div id="honeypot-container"></div>

    <!-- SEZIONE 5: Orari -->
    <div class="knowledge-card">
        <div class="card-header">
            <h3><i class="fas fa-clock"></i> <span data-i18n="section_hours_title"></span></h3>
            <i class="fas fa-chevron-down chevron"></i>
        </div>
        <div class="card-content">
            <div id="hours-container"></div>
        </div>
    </div>

    <!-- SEZIONE 6: Asset Visivi -->
    <div class="knowledge-card">
        <div class="card-header">
            <h3><i class="fas fa-photo-video"></i> <span data-i18n="section_assets_title"></span></h3>
            <i class="fas fa-chevron-down chevron"></i>
        </div>
        <div class="card-content">
            <div class="row">
                <div class="col">
                    <label data-i18n="lbl_logo"></label>
                    <div class="asset-upload-box" id="logo-upload-box">
                        <input type="file" id="logo-input" accept="image/*">
                        <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <span class="upload-text" data-i18n="upload_logo"></span>
                        <div id="logo-preview" class="asset-preview"></div>
                    </div>
                </div>
                <div class="col">
                    <label data-i18n="lbl_photo"></label>
                    <div class="asset-upload-box" id="photo-upload-box">
                        <input type="file" id="photo-input" accept="image/*">
                        <div class="upload-icon"><i class="fas fa-camera"></i></div>
                        <span class="upload-text" data-i18n="upload_photo"></span>
                        <div id="photo-preview" class="asset-preview"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>

  <!-- FLOATING SAVE BUTTON -->
  <div id="save-bar" class="save-bar">
    <button id="saveBtn" class="btn btn-primary btn-lg" disabled>
        <i class="fas fa-save"></i> <span data-i18n="btn_save"></span>
    </button>
  </div>

  <!-- COLLEGAMENTO AL NUOVO FILE JAVASCRIPT -->
  <script src="honeypot_editor_logic.js"></script>

</body>
</html>
