<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Legal & Compliance</title>
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="styles.css">

  <style>
    .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .nav-tab { flex: 1; padding: 12px; text-align: center; background: var(--glass); border: 1px solid var(--glass-border); border-radius: var(--radius-md); color: var(--text-muted); cursor: pointer; font-weight: 600; transition: all 0.2s; }
    .nav-tab.active { background: var(--primary); color: #fff; border-color: var(--primary); box-shadow: 0 4px 15px rgba(91, 111, 237, 0.3); }
    
    .legal-content { font-size: 13px; line-height: 1.6; color: var(--text-muted); height: 65vh; overflow-y: auto; padding-right: 10px; }
    .legal-content h3 { color: #fff; margin-top: 20px; margin-bottom: 10px; font-size: 15px; border-bottom: 1px solid var(--glass-border); padding-bottom: 5px; }
    .legal-content p { margin-bottom: 15px; }
    .legal-content ul { margin-left: 20px; margin-bottom: 15px; }
    .legal-content li { margin-bottom: 5px; }
    strong { color: var(--text-main); }
    
    .affiliate-disclaimer { font-size: 11px; font-style: italic; opacity: 0.7; margin-top: 20px; border-top: 1px dashed var(--glass-border); padding-top: 10px; }
  </style>
</head>
<body>

  <div class="container">
    <h1 class="text-center" data-i18n="page_title">Legal Center</h1>
    <p class="subtitle text-center" data-i18n="page_subtitle">Compliance & Transparency</p>

    <!-- TABS -->
    <div class="nav-tabs">
      <div class="nav-tab active" onclick="switchTab('privacy')" id="tab-privacy" data-i18n="tab_privacy">Privacy Policy</div>
      <div class="nav-tab" onclick="switchTab('terms')" id="tab-terms" data-i18n="tab_terms">Terms & Cond.</div>
    </div>

    <!-- PRIVACY CONTENT -->
    <div id="content-privacy" class="card legal-content">
      <!-- IT -->
      <div class="lang-content lang-it">
        <h3>1. Titolare del Trattamento</h3>
        <p>I dati sono trattati da <strong>TrinAI Solutions</strong>. Per richieste: <em>support@trinai.it</em>.</p>

        <h3>2. Dati Raccolti</h3>
        <p>Per erogare il servizio SiteBoS, trattiamo:</p>
        <ul>
          <li><strong>Identità:</strong> ID Telegram, Nome, Username.</li>
          <li><strong>Dati Business:</strong> P.IVA, Ragione Sociale, Indirizzi (solo se forniti volontariamente).</li>
          <li><strong>Input AI:</strong> Testi e file inviati al bot vengono processati tramite API sicure (es. Google Gemini) esclusivamente per generare le risposte richieste.</li>
        </ul>

        <h3>3. Sicurezza e Conservazione</h3>
        <p>I dati sono crittografati e conservati su server sicuri (MongoDB Atlas, Europa). Non cediamo dati a terzi per marketing.</p>

        <h3>4. I Tuoi Diritti</h3>
        <p>Puoi richiedere la cancellazione totale del tuo account inviando il comando <code>/delete_me</code> al bot o contattando il supporto.</p>
        
        <p class="affiliate-disclaimer">Questo servizio utilizza link di affiliazione. Quando attivi servizi partner (es. POS, Banche), potremmo ricevere una commissione senza costi aggiuntivi per te.</p>
      </div>

      <!-- EN (Fallback per tutti gli altri) -->
      <div class="lang-content lang-en hidden">
        <h3>1. Data Controller</h3>
        <p>Data is processed by <strong>TrinAI Solutions</strong>. Contact: <em>support@trinai.it</em>.</p>

        <h3>2. Collected Data</h3>
        <p>To provide the SiteBoS service, we process:</p>
        <ul>
          <li><strong>Identity:</strong> Telegram ID, Name, Username.</li>
          <li><strong>Business Data:</strong> VAT ID, Company Name (only if provided).</li>
          <li><strong>AI Input:</strong> Text and files sent to the bot are processed via secure APIs (e.g. Google Gemini) solely to generate the requested responses.</li>
        </ul>

        <h3>3. Security & Retention</h3>
        <p>Data is encrypted and stored on secure servers (MongoDB Atlas, Europe). We do not sell data to third parties.</p>

        <h3>4. Your Rights</h3>
        <p>You can request full account deletion by sending <code>/delete_me</code> to the bot or contacting support.</p>
        
        <p class="affiliate-disclaimer">This service uses affiliate links. When you activate partner services (e.g., POS, Banking), we may earn a commission at no extra cost to you.</p>
      </div>
    </div>

    <!-- TERMS CONTENT -->
    <div id="content-terms" class="card legal-content hidden">
      <!-- IT -->
      <div class="lang-content lang-it">
        <h3>1. Accettazione</h3>
        <p>Utilizzando SiteBoS, accetti questi Termini. Il servizio è B2B, riservato a P.IVA e Professionisti.</p>

        <h3>2. Limitazione di Responsabilità (AI)</h3>
        <p><strong>SiteBoS è un assistente basato su Intelligenza Artificiale.</strong> L'AI può commettere errori ("allucinazioni"). L'utente è l'unico responsabile della verifica delle informazioni (es. preventivi, contratti) prima dell'uso. TrinAI non è responsabile per danni derivanti dall'uso non verificato dell'output AI.</p>

        <h3>3. Uso Consentito</h3>
        <p>È vietato utilizzare il bot per attività illegali, spam o generazione di contenuti dannosi. La violazione comporta il ban immediato.</p>
      </div>

      <!-- EN -->
      <div class="lang-content lang-en hidden">
        <h3>1. Acceptance</h3>
        <p>By using SiteBoS, you agree to these Terms. This is a B2B service intended for Professionals and Businesses.</p>

        <h3>2. AI Disclaimer & Liability</h3>
        <p><strong>SiteBoS is an AI-based assistant.</strong> AI can make mistakes ("hallucinations"). You are solely responsible for verifying all information (e.g., quotes, contracts) before use. TrinAI is not liable for damages resulting from unverified use of AI output.</p>

        <h3>3. Permitted Use</h3>
        <p>You may not use the bot for illegal activities, spam, or generating harmful content. Violations will result in an immediate ban.</p>
      </div>
    </div>

    <p class="cancel-hint" data-i18n="close_hint">Chiudi per tornare al Bot.</p>

  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();

    const i18n = {
      it: { page_title: "Area Legale", page_subtitle: "Compliance & Trasparenza", tab_privacy: "Privacy Policy", tab_terms: "Termini", close_hint: "Chiudi" },
      en: { page_title: "Legal Center", page_subtitle: "Compliance & Transparency", tab_privacy: "Privacy Policy", tab_terms: "Terms", close_hint: "Close" }
    };

    const urlParams = new URLSearchParams(window.location.search);
    // Rileva lingua (default IT, fallback EN per tutto il resto)
    const langParam = urlParams.get('lang') || tg.initDataUnsafe?.user?.language_code || 'it';
    const lang = (langParam === 'it') ? 'it' : 'en'; 

    const t = i18n[lang];
    document.querySelector('[data-i18n="page_title"]').innerText = t.page_title;
    document.querySelector('[data-i18n="page_subtitle"]').innerText = t.page_subtitle;
    document.querySelector('[data-i18n="tab_privacy"]').innerText = t.tab_privacy;
    document.querySelector('[data-i18n="tab_terms"]').innerText = t.tab_terms;
    document.querySelector('[data-i18n="close_hint"]').innerText = t.close_hint;

    // Mostra contenuto lingua corretta
    document.querySelectorAll('.lang-content').forEach(el => el.classList.add('hidden'));
    document.querySelectorAll(`.lang-${lang}`).forEach(el => el.classList.remove('hidden'));

    function switchTab(tab) {
      document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
      document.getElementById('tab-' + tab).classList.add('active');
      document.getElementById('content-privacy').classList.add('hidden');
      document.getElementById('content-terms').classList.add('hidden');
      document.getElementById('content-' + tab).classList.remove('hidden');
    }
  </script>
</body>
</html>
